{% if site.visitor_map and site.visitor_map.enabled %}
<div class="visitor-map" style="margin: 40px 0; padding: 20px; border-top: 1px solid #e0e0e0;">
  <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 15px; color: #555; text-align: center;">
    🌍 Global Visitors
  </h3>
  <div style="display: flex; justify-content: center; flex-direction: column; align-items: center; gap: 15px;">
    {% if site.visitor_map.provider == 'clustrmaps' %}
      <!-- ClustrMaps -->
      {% if site.visitor_map.clustrmaps_id and site.visitor_map.clustrmaps_id != '' %}
      <a href="https://clustrmaps.com/site/{{ site.visitor_map.clustrmaps_id }}" title="Visit tracker">
        <img src="//clustrmaps.com/map_v2.png?cl=ffffff&w=a&t=tt&d={{ site.visitor_map.clustrmaps_id }}&co=2d78ad&ct=000000" alt="visitor map" style="max-width: 100%; height: auto;" />
      </a>
      {% else %}
      <p style="color: #999; font-size: 0.9rem;">请在 _config.yml 中设置 clustrmaps_id</p>
      {% endif %}
    {% elsif site.visitor_map.provider == 'flagcounter' %}
      <!-- Flag Counter -->
      {% if site.visitor_map.flagcounter_id and site.visitor_map.flagcounter_id != '' %}
      <a href="https://info.flagcounter.com/{{ site.visitor_map.flagcounter_id }}">
        <img src="https://s11.flagcounter.com/count2/{{ site.visitor_map.flagcounter_id }}/bg_FFFFFF/txt_000000/border_CCCCCC/columns_3/maxflags_12/viewers_0/labels_1/pageviews_1/flags_0/percent_0/" alt="Flag Counter" style="max-width: 100%; height: auto;" />
      </a>
      {% else %}
      <p style="color: #999; font-size: 0.9rem;">请在 _config.yml 中设置 flagcounter_id</p>
      {% endif %}
    {% endif %}

    {% if site.visitor_map.show_counter %}
      <!-- Visitor Counter Badge -->
      {% include visitor_counter.liquid %}
    {% endif %}
  </div>
</div>
{% endif %}
